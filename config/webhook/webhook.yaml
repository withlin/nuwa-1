apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: "mutating-webhook-configuration"
webhooks:
  - name: "mutating-webhook-configuration"
    namespaceSelector:
      matchExpressions:
        - key: nuwa-injection
          operator: In
          values: ["enabled"]
    admissionReviewVersions: ["v1", "v1beta1"]
    sideEffects: NoneOnDryRun
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced"
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN5RENDQWJDZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRFNU1USXlOREE0TXpjeE5Gb1hEVEk1TVRJeU1UQTRNemN4TkZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBT0ZiCkNaQnE3bFJNdVNpYlRWRXRPYWhvYjZJMDBjNjlHTWR1UHlKUXFsa2hRRGxSRWUzeGp3NlNrT01nbXBGNU15ZmMKa2QzN1ZwdmMvREkzeWVnTCtjQnc4MDVLcGJpekVTRGo2QWx2a2pHMjZJSldNcGYzTVpVbzBxV0JVenJxYW83MgpLWTFLVWhGQmpGTDNOUFI1MWdLeGtMRlhOblVieHY4VnhZTEY4QlF4Z2hBMUdqVFM0TE5jMVZEd0NQMHVZWFFsClB5R0tHa2oydlAzdjBJNUxDZkpobExKWnN4OFk5Ny9OY21UZWNkTHZkTVJUZlNoZy9uVkRTQ2JqemppOWVGaUwKdjRVbGxoa0kyYjlqbUE4aUZQQkozbEdKbWQ5WnRoL1NyR1RKSjMvV3prY0M2dkZwVlNTSVdrcXJzMUNmc2pZSQpmYUg1Y3RyWlM5enUwcWNlSzBFQ0F3RUFBYU1qTUNFd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFMRGFkSHV4WW9nait6SlB3bnE1aUthWlhTd24KeFNFTlpRM21KMUJUcyt3K2pOSlpnQTkzR1p1eXhDMFhMYkNLUUNqcG1kWDFHM0F6QzhCdkxweDhIV1c3UkkwSwphRGxGSHlYR3JVUktRYVFKSEFXeUxjbnh3VGYwWEpuTjh5WDZiQVFlWjgyNmtqM2NhSUdabnBqL1pYREV5WHhiCkx3ZXU4eFNCVDdvb1UwTHRyQ3U4TkhVUVI1U3M2MFJZRHhXNlhsQ1VOdHRpdEtHRWlxNzFFV3JZT3M4WUYwK0UKZksyRGtvblhqMWNzOVBUOG5LeUxnQ3J1NUdIQkdRUW9hc2lmN1pKQVVvdTA1b240UkdkNHlxOXVGdHlGZU5TUQpYYmM2UStFV0ZnZTYxL1ROK01YQ3hoakxLL1VrLzVkQy9YVzJqdCtOV1lZM1dmbmU0Q0hEei9TOU9iOD0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
      service:
        name:  nuwa-controller-manager-service
        namespace: nuwa-system
        path: /mutating-pods
    failurePolicy: Ignore  #  Fail/Ignore
    name: injector.nuwa.io
